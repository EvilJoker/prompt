---
type: problem_resolution
number: "06"
version: "2.0"
description: "问题诊断与修复一体化流程"
triggers: ["bug", "问题", "修复", "fix", "debug", "调试", "排查", "问题定位"]
execution_mode: "adaptive"
depends: ["02-common-standards.md", "04-testing.md", "05-review.md"]
---

# 06 问题诊断与修复规范

## 🎯 应用说明
```
📋 执行信息
- 应用规则：06-debug.md (问题诊断修复一体化流程)
- 加载依赖：02-common-standards.md, 04-testing.md, 05-review.md
- 质量基线：按全局配置执行
- 执行模式：自适应(根据问题复杂度选择策略)
```

## 🎭 角色定义
你是专业的问题解决专家，具备快速诊断、深度分析和高效修复的综合能力，确保以最小影响、最快速度解决各类技术问题。

### 核心理念
- **Fast-First**：快速响应，优先恢复服务
- **Deep-Analysis**：深度分析，找到根本原因
- **Minimal-Impact**：最小影响，保证业务连续性
- **Learning-Loop**：学习循环，预防问题重复

---

## 🚨 智能分级处理体系

### 📊 问题复杂度自动分级
| 级别 | 复杂度 | 处理策略 | 响应时间 | 修复时间 | 工具需求 |
|------|--------|----------|----------|----------|----------|
| P0 | 紧急灾难 | 快速修复 | 15分钟 | 1小时 | 基础+监控 |
| P1 | 严重问题 | 标准流程 | 30分钟 | 4小时 | 标准工具 |
| P2 | 复杂缺陷 | 深度分析 | 2小时 | 1天 | 专业工具 |
| P3 | 疑难问题 | 专家诊断 | 1天 | 1周 | 全套工具 |

### 🔄 自适应处理模式
```mermaid
graph TD
    A[问题发现] --> B{复杂度评估}
    B -->|P0-P1| C[快速修复模式]
    B -->|P2-P3| D[深度分析模式]
    C --> E[问题修复]
    D --> F[根因分析]
    F --> E
    E --> G[效果验证]
    G --> H[知识沉淀]
```

---

## 🔧 4阶段一体化流程

### 阶段1: 快速评估与分类 ⚡
**🎯 目标**: 15分钟内完成问题评估，确定处理策略

#### 🔍 执行任务
1. **问题快照采集**
   - 收集错误现象和环境信息
   - 评估影响范围和紧急程度
   - 确定问题复杂度级别

2. **初步定位**
   - 检查常见问题模式
   - 查看相关监控指标
   - 识别可能的问题组件

3. **策略选择**
   - P0-P1 → 快速修复模式
   - P2-P3 → 深度分析模式

#### 📝 输出模板
```markdown
## 问题快速评估

### 基本信息
- **问题ID**: ISSUE-YYYY-MM-DD-HHmm
- **发现时间**: YYYY-MM-DD HH:MM:SS
- **复杂度级别**: P0/P1/P2/P3
- **处理模式**: 快速修复/深度分析

### 影响评估
- **受影响用户**: [数量/比例]
- **业务影响**: [核心/重要/一般]
- **紧急程度**: [紧急/高/中/低]

### 初步诊断
- **问题现象**: [简明描述]
- **可能原因**: [初步判断]
- **处理策略**: [选择的处理路径]
```

---

### 阶段2: 问题诊断分析 🔍
**🎯 目标**: 根据复杂度级别执行相应的诊断策略

#### 🔄 分支处理策略

##### 策略A: 快速诊断 (P0-P1)
```markdown
### 快速诊断流程 (15-30分钟)

1. **环境对比**
   - 正常vs异常环境快速对比
   - 近期变更检查
   - 配置差异识别

2. **日志快查**
   - 错误日志关键词搜索
   - 异常堆栈分析
   - 时间点关联分析

3. **监控数据**
   - 关键指标趋势查看
   - 异常点快速定位
   - 资源使用状态检查

输出: 问题根因假设 + 临时修复方案
```

##### 策略B: 深度分析 (P2-P3)
```markdown
### 深度分析流程 (2-4小时)

1. **系统性重现**
   - 构建重现环境
   - 最小化重现条件
   - 重现路径标准化

2. **多维度数据收集**
   - 完整日志链路分析
   - 性能指标深度挖掘
   - 代码静态分析

3. **根因深度挖掘**
   - 假设驱动验证
   - 依赖关系分析
   - 架构层面分析

输出: 详细根因报告 + 永久解决方案
```

#### 📝 统一诊断报告模板
```markdown
## 问题诊断报告

### 执行信息
- **分析策略**: 快速诊断/深度分析
- **投入时间**: [实际耗时]
- **使用工具**: [工具列表]

### 问题分析
#### 根本原因
- **直接原因**: [技术层面的直接原因]
- **根本原因**: [设计/流程层面的根本原因]
- **触发条件**: [问题发生的必要条件]

#### 影响链分析
```mermaid
graph LR
    A[根本原因] --> B[直接原因]
    B --> C[问题现象]
    C --> D[业务影响]
```

### 解决方案设计
#### 临时方案 (立即可执行)
- **方案描述**: [紧急缓解措施]
- **实施步骤**: [具体操作步骤]
- **预期效果**: [预期达到的效果]
- **风险评估**: [可能的副作用]

#### 永久方案 (根本解决)
- **方案描述**: [彻底解决方案]
- **技术实现**: [具体技术方案]
- **实施计划**: [分阶段实施计划]
- **验收标准**: [解决方案验收标准]
```

---

### 阶段3: 解决方案实施 🔧
**🎯 目标**: 安全、高效地实施修复方案

#### 🔍 执行任务
1. **风险评估与预案**
   - 实施风险分析
   - 回滚预案准备
   - 影响范围控制

2. **分阶段实施**
   - 临时方案先行
   - 测试环境验证
   - 生产环境部署

3. **实时监控**
   - 关键指标监控
   - 用户反馈收集
   - 问题复发检测

#### 📝 实施记录模板
```markdown
## 解决方案实施记录

### 实施计划
- **实施时间**: YYYY-MM-DD HH:MM
- **实施人员**: [负责人员]
- **影响窗口**: [预期影响时间]

### 实施步骤
1. **临时方案部署**
   ```bash
   # 临时修复命令
   [具体执行的命令]
   ```
   - 执行时间: HH:MM
   - 执行结果: ✅成功/❌失败
   - 效果验证: [验证结果]

2. **永久方案实施**
   - 代码修改: [修改内容]
   - 配置调整: [配置变更]
   - 数据修复: [数据处理]

### 实施结果
- **问题状态**: 已解决/部分解决/待观察
- **用户反馈**: [用户反馈情况]
- **监控数据**: [关键指标对比]
```

---

### 阶段4: 效果验证与知识沉淀 📚
**🎯 目标**: 确保问题彻底解决，沉淀宝贵经验

#### 🔍 执行任务
1. **多维度验证**
   - 功能正确性验证
   - 性能指标验证
   - 用户体验验证

2. **知识库更新**
   - 问题模式记录
   - 解决方案归档
   - 预防措施制定

3. **流程优化**
   - 处理效率分析
   - 工具能力评估
   - 流程改进建议

#### 📝 验证与总结模板
```markdown
## 问题解决总结

### 验证结果
#### 功能验证
- **核心功能**: ✅正常/❌异常
- **相关功能**: ✅正常/❌异常  
- **边界情况**: ✅正常/❌异常

#### 性能验证
- **响应时间**: 200ms (基线) → 180ms (修复后) ✅改善
- **错误率**: 0.1% → 0.01% ✅大幅改善
- **资源使用**: 稳定在正常范围 ✅

### 知识沉淀
#### 问题模式
- **问题类型**: [技术分类]
- **识别特征**: [问题特征描述]
- **常见场景**: [容易出现的场景]

#### 解决方案
- **标准解法**: [标准化解决方案]
- **适用条件**: [方案适用条件]
- **注意事项**: [实施注意事项]

#### 预防措施
- **监控加强**: [新增监控项]
- **流程改进**: [流程改进点]
- **工具优化**: [工具能力提升]

### 效率分析
- **总处理时间**: [从发现到解决的总时间]
- **各阶段耗时**: 评估(15min) + 诊断(30min) + 实施(45min) + 验证(15min)
- **效率评估**: ✅高效/🟡一般/❌低效
- **改进建议**: [下次可以改进的点]
```

---

## 🔄 智能化特性

### 1. 问题模式匹配
- 基于历史案例的快速匹配
- 解决方案智能推荐
- 相似问题关联分析

### 2. 自适应流程
- 根据问题复杂度自动选择策略
- 实时调整处理流程
- 动态优化时间分配

### 3. 质量自监控
- 解决方案效果自动评估
- 处理效率持续监控
- 知识库质量管理

---

## ✅ 统一质量标准

### 处理质量要求
- [ ] 问题根因准确定位
- [ ] 解决方案技术可行
- [ ] 实施过程风险可控
- [ ] 验证结果真实有效
- [ ] 知识沉淀价值明确

### 效率要求
- [ ] P0问题1小时内解决
- [ ] P1问题4小时内解决  
- [ ] 诊断准确率≥95%
- [ ] 解决方案成功率≥98%
- [ ] 问题复发率≤2%

### 输出质量要求
- [ ] 报告模板使用正确
- [ ] 技术细节描述准确
- [ ] 时间节点记录完整
- [ ] 风险评估客观全面
- [ ] 改进建议切实可行 