# 🚀 项目架构初始化规则

## 🏷️ 规则元数据
- **类型**: 项目初始化规范
- **编号**: 00
- **版本**: v1.0
- **描述**: 项目架构设计文档生成与项目结构初始化
- **触发条件**: 前缀 `项目初始化` 或 `project init` 或包含关键词 ["架构设计", "项目搭建", "项目初始化", "architecture init"]
- **执行模式**: 3阶段交互式：用户信息收集 → 架构文档生成 → 目录结构创建 → 快速开发指南生成
- **依赖规则**: `02-common-standards.md`, `03-design.md`

---

## 🎯 初始化目标

**核心理念**: 基于用户提供的业务需求和技术栈，生成具体的架构设计文档，建立完整的项目文档结构体系

### 🎭 设计原则
- **标准规范**: 遵循行业标准的架构设计文档规范
- **完整性**: 涵盖项目的完整生命周期文档
- **可维护**: 建立可持续维护的文档结构
- **实用性**: 生成立即可用的文档和结构

---

## 🚀 3阶段交互式项目初始化流程

### ⚠️ 执行控制要求
1. **阶段控制**: 只能执行当前阶段，每完成一个阶段必须等待用户回复 `yes` 才继续
2. **禁止跳阶段**: 不得预判后续阶段或提前执行未来任务
3. **用户交互**: `yes` 继续下一阶段，`no` 重新处理当前阶段
4. **文档约定**: 所有文档生成到规范的目录结构中

---

### Phase 1: 项目信息收集与架构文档生成 📋

**🎯 目标**: 收集项目信息，生成具体的架构设计文档

**📋 用户输入要求**:
请提供以下项目信息：
- **项目名称**: [项目的正式名称]
- **项目描述**: [项目的业务目标和核心功能，1-2句话简述]
- **技术栈**: [前端、后端、数据库、部署等技术选择]
- **业务领域**: [电商、金融、教育、工具等业务领域]
- **项目规模**: [小型/中型/大型项目]

**📤 执行任务**:
- 基于用户输入生成具体的架构设计文档
- 文档包含完整的项目信息、技术架构、系统设计等
- 创建docs/architecture/目录
- 生成文件: `docs/architecture/[项目名称]-系统架构设计文档-v1.0.md`

**📤 生成的架构文档内容**:
```markdown
# [项目名称] 系统架构设计文档 v1.0

## 📋 文档信息
- **项目名称**: [用户提供的项目名称]
- **文档版本**: v1.0
- **创建日期**: [当前日期]
- **更新日期**: [当前日期]
- **维护人员**: [项目团队]

---

## 1. 项目概述

### 1.1 项目介绍
- **项目名称**: [项目名称]
- **项目描述**: [用户提供的项目描述]
- **业务领域**: [用户选择的业务领域]
- **项目规模**: [用户选择的项目规模]
- **开发周期**: [根据规模预估的开发周期]

### 1.2 业务目标
- **核心价值**: [基于项目描述分析的核心价值]
- **目标用户**: [根据业务领域确定的目标用户群体]
- **主要功能**: [基于项目描述提取的主要功能]
- **预期成果**: [项目交付的预期效果]

## 2. 技术架构

### 2.1 架构设计原则
- **可扩展性**: 支持业务快速发展和功能扩展
- **可维护性**: 代码结构清晰，便于团队协作开发
- **安全性**: 数据安全和用户隐私保护
- **性能性**: 系统响应速度和处理能力
- **可用性**: 系统稳定性和容错能力

### 2.2 整体架构设计
```
[基于用户选择的技术栈生成系统架构图描述]
```

- **架构模式**: [根据项目规模选择合适的架构模式]
- **核心组件**: [根据技术栈确定的关键组件]
- **数据流向**: [系统内数据流转路径]
- **接口设计**: [内外部接口规划]

### 2.3 技术栈选择
**前端技术**:
- 框架: [用户选择的前端框架]
- UI组件: [匹配的UI组件库]
- 状态管理: [对应的状态管理方案]
- 构建工具: [推荐的构建工具]

**后端技术**:
- 编程语言: [用户选择的后端语言]
- 应用框架: [匹配的后端框架]
- 数据访问: [对应的数据访问层]
- 消息队列: [推荐的消息队列]

**数据存储**:
- 主数据库: [用户选择的数据库]
- 缓存系统: [推荐的缓存方案]
- 文件存储: [文件存储方案]

**部署运维**:
- 容器化: [用户选择的容器化方案]
- CI/CD: [推荐的CI/CD工具]
- 监控系统: [监控方案]
- 云平台: [部署平台选择]

## 3. 系统设计

### 3.1 目录结构设计
```
[项目名称]/
├── docs/                     # 📚 项目文档
│   ├── architecture/         # 架构设计文档
│   ├── feature/             # 子功能或者模块的详设文档
│   ├── api/                 # API文档
│   ├── deployment/          # 部署文档
│   └── development/         # 开发文档
├── src/                     # 💻 源代码目录
│   ├── components/          # 组件目录
│   ├── services/           # 服务层
│   ├── utils/              # 工具函数
│   └── config/             # 配置文件
├── tests/                   # 🧪 测试代码
│   ├── unit/               # 单元测试
│   ├── integration/        # 集成测试
│   └── e2e/                # 端到端测试
├── scripts/                 # 🔧 构建和部署脚本
├── config/                  # ⚙️ 配置文件
└── README.md               # 项目说明文档
```

### 3.2 数据库设计
- **数据模型**: [根据业务领域设计的核心实体]
- **表结构**: [主要数据表设计思路]
- **索引策略**: [数据库性能优化策略]
- **数据迁移**: [数据版本控制策略]

### 3.3 API设计规范
- **RESTful规范**: [API设计风格和命名规范]
- **数据格式**: [JSON格式规范]
- **错误处理**: [统一错误码和异常处理]
- **版本控制**: [API版本管理策略]

## 4. 测试架构

### 4.1 测试策略
- **单元测试**: 组件和函数级别测试，覆盖率≥90%
- **集成测试**: 模块间集成测试
- **系统测试**: 完整系统功能测试
- **性能测试**: 系统性能和压力测试

### 4.2 测试工具和框架
- **单元测试**: [基于技术栈选择的测试框架]
- **集成测试**: [集成测试工具]
- **E2E测试**: [端到端测试工具]
- **性能测试**: [性能测试工具]

## 5. 部署架构

### 5.1 环境规划
- **开发环境**: 本地开发环境配置
- **测试环境**: 测试环境部署方案
- **生产环境**: 生产环境架构和配置

### 5.2 部署策略
- **部署方式**: [根据技术栈选择的部署方式]
- **发布流程**: 代码发布和版本控制
- **回滚机制**: 快速回滚和故障恢复

## 6. 安全设计

### 6.1 安全策略
- **认证授权**: [用户认证和权限控制方案]
- **数据安全**: [数据加密和隐私保护]
- **网络安全**: [防火墙和网络隔离]
- **安全审计**: [日志记录和安全监控]

## 7. 运维监控

### 7.1 监控体系
- **系统监控**: 服务器和应用监控
- **业务监控**: 关键业务指标监控
- **日志管理**: 日志收集和分析
- **告警机制**: 异常告警和通知

---

**文档版本**: v1.0  
**创建日期**: [当前日期]  
**更新日期**: [当前日期]  
**维护人员**: [项目负责人]
```

**📄 文档生成确认**:
```
==== 架构设计文档已生成 ====

📄 **文档信息**:
- 文档位置: docs/architecture/[项目名称]-系统架构设计文档-v1.0.md
- 文档大小: [约300+行]
- 生成时间: [时间戳]

✅ **内容检查**:
- 项目概述和业务目标
- 技术架构和技术栈
- 系统设计和目录结构
- 测试和部署架构
- 安全和运维监控

📋 **文档质量**:
- 结构完整性: ✅
- 内容准确性: ✅
- 格式规范性: ✅
```

**⏸️ 等待用户确认**: 架构设计文档已生成，请回复 `yes` 继续项目目录结构创建

---

### Phase 2: 项目目录结构检查与创建 🗂️

**🎯 目标**: 检查并创建项目必要的目录结构

**📋 执行任务**:
- 扫描当前项目目录结构
- 对比标准目录结构
- 创建缺失的目录
- 生成目录创建报告

**标准项目目录结构**:
```
[项目根目录]/
├── docs/                    # 📚 项目文档目录
│   ├── architecture/        # 架构设计文档
│   ├── feature/             # 子功能或者模块的详设文档
│   ├── api/                # API接口文档
│   ├── deployment/         # 部署相关文档
│   ├── development/        # 开发相关文档
│   ├── user/               # 用户手册和帮助文档
│   └── assets/             # 文档相关资源文件
├── src/                    # 💻 源代码目录
├── tests/                  # 🧪 测试代码目录
│   ├── unit/              # 单元测试
│   ├── integration/       # 集成测试
│   └── e2e/               # 端到端测试
├── scripts/                # 🔧 构建和部署脚本
├── config/                 # ⚙️ 配置文件目录
├── .github/                # GitHub相关配置
│   ├── workflows/         # GitHub Actions工作流
│   └── ISSUE_TEMPLATE/    # Issue模板
└── docker/                 # 🐳 Docker相关文件
```

**📤 输出目录创建报告**:
```markdown
## 项目目录结构检查报告

### ✅ 已存在的目录
- [x] [列出已存在的目录]

### 🆕 新创建的目录
- [+] [列出新创建的目录]

### 📊 目录创建统计
- **总目录数**: [总数]
- **已存在**: [数量]
- **新创建**: [数量]
- **创建成功率**: 100%
```

**⏸️ 等待用户确认**: 目录结构创建完成，请回复 `yes` 继续快速开发指南生成

---

### Phase 3: 项目文档生成 📄

**🎯 目标**: 生成项目的标准文档，包括面向用户的README和面向开发者的开发指南

**📋 执行任务**:
- 生成标准开源项目README.md文档
- 生成快速开发指南文档
- 完成项目初始化总结

**📤 生成文件1**: `README.md` (项目根目录)

**README.md内容要求** (面向项目用户):
```markdown
# [项目名称]

[项目的简洁描述 - 一句话说明项目是什么]

## ✨ 特性

- [核心功能特性1]
- [核心功能特性2]
- [核心功能特性3]

## 🚀 快速开始

### 安装

```bash
[安装命令]
```

### 使用

```bash
[基本使用示例]
```

## 📖 文档

- [API文档](docs/api/)
- [部署指南](docs/deployment/)
- [开发者文档](docs/development/)

## 🤝 贡献

欢迎贡献代码！请阅读 [贡献指南](docs/development/快速开发指南.md) 了解如何参与开发。

## 📄 许可证

[许可证类型] - 详见 [LICENSE](LICENSE) 文件

## 🙏 致谢

[感谢贡献者或引用的项目]
```

**📤 生成文件2**: `docs/development/快速开发指南.md`

**开发指南内容要求** (面向项目开发者):
- 开发环境搭建步骤
- 项目结构和代码组织说明  
- 本地开发服务器启动方法
- 代码规范和最佳实践
- 测试运行和调试方法
- 提交代码的工作流程
- 常见开发问题解答
- 推荐的开发工具和IDE配置

**📄 文档作用区分**:

| 文档类型 | 目标用户 | 主要内容 | 位置 |
|---------|---------|---------|------|
| README.md | 项目用户 | 项目介绍、安装使用、功能特性 | 根目录 |
| 快速开发指南 | 项目开发者 | 环境搭建、开发流程、代码规范 | docs/development/ |

**📄 文件生成确认**:
```
==== 项目文档生成完

📄 **生成的文件**:
- docs/architecture/[项目名称]-系统架构设计文档-v1.0.md
- docs/development/快速开发指南.md
- README.md (更新)

📊 **初始化统计**:
- **总文件数**: 3
- **生成成功**: 3
- **创建目录**: [数量]
- **成功率**: 100%

🎯 **项目状态**: 初始化完成，可以开始开发
```

**⏸️ 最终确认**: 请回复 `yes` 完成项目初始化

---

## 🚨 强制交互控制要求

### ⚠️ 绝对禁止行为
- **禁止跳阶段执行**: 未经用户确认不得进入下一阶段
- **禁止假设同意**: 必须等待用户明确回复
- **禁止批量输出**: 一次只能输出当前阶段内容
- **禁止模板输出**: 必须生成具体的、可用的文档内容

### ✅ 必须执行行为
- **逐阶段等待确认**: 每阶段完成后等待用户 `yes`
- **生成具体文档**: 基于用户输入生成具体的架构文档
- **创建实际目录**: 真实创建项目目录结构
- **输出详细报告**: 每阶段提供详细的执行报告

### 📁 文档输出规范
- **架构文档位置**: docs/architecture/ 目录
- **开发文档位置**: docs/development/ 目录
- **命名规范**: [项目名称]-[文档类型]-v1.0.md
- **内容要求**: 基于用户输入生成具体内容，非模板

---

## 🎯 初始化质量保证

### 📊 质量指标要求
- **文档内容完整性**: ≥ 95%
- **目录结构标准化**: 100%
- **用户信息准确性**: 100%
- **文档格式规范性**: 100%

### 🔍 每阶段质量检查
每个阶段都必须通过以下检查：
- [ ] 输出内容完整准确
- [ ] 基于用户输入生成具体内容
- [ ] 文档格式规范统一
- [ ] 用户确认获得通过

---

## 总结

项目初始化采用**3阶段交互式流程**：

1. **Phase 1**: 项目信息收集与架构文档生成 → 等待确认
2. **Phase 2**: 项目目录结构检查与创建 → 等待确认
3. **Phase 3**: 项目文档生成 → 等待确认，完成初始化

**核心价值**: 
- 生成具体可用的架构设计文档
- 建立标准化的项目目录结构
- 提供完整的快速开发指南
- 确保项目开发的规范性和一致性 